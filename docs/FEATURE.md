# pyfsn 機能拡張ロードマップ

本ドキュメントは、pyfsn の今後の機能拡張計画をまとめたものです。

---

## A. コア体験の強化（優先度: 高）

| # | 機能 | 概要 | 根拠 |
|---|------|------|------|
| 1 | **キーボードナビゲーション実装** | `Esc`で選択解除、`F`でフォーカス、`R`でカメラリセット、矢印キーでノード間移動 | SPEC/READMEに「未実装」と明記されている最優先のUXギャップ |
| 2 | **FrustumCuller / LOD のRenderer接続** | `performance.py`に実装済みのカリング・LODをLegacy Rendererの描画ループに接続 | 大規模ディレクトリでのFPS改善に直結。コードは既に存在 |
| 3 | **ProgressiveLoader の接続** | 大規模スキャン結果のバッチ描画（段階ロード） | 10万ノード規模のUX改善 |
| 4 | **設定永続化 (Config File)** | テーマ選択、ブルーム有無、ラベル表示等をJSON/TOMLで保存・復元 | 現状は起動毎にリセットされる |

### 推奨実装順序

```
A1 (キーボード) → A2 (カリング/LOD接続) → A3 (段階ロード) → A4 (設定永続化)
```

---

## B. 可視化の進化（優先度: 中）

| # | 機能 | 概要 |
|---|------|------|
| 5 | **Git統合** | `git status` に基づくファイルの色分け（Modified=赤、Added=緑、Untracked=黄）。`_calculate_emission()`にgit_statusフックが既に準備済み |
| 6 | **ファイルタイプアイコン** | キューブ上面にファイル種別アイコン（Python, JS, 画像等）をテクスチャ描画 |
| 7 | **アニメーション遷移** | ディレクトリ移動時のカメラフライスルーアニメーション（現在は300msスナップのみ） |
| 8 | **ディレクトリサイズヒートマップ** | プラットフォーム色をディレクトリ合計サイズで着色（ディスク使用量の直感的把握） |

---

## C. 操作性・UX（優先度: 中）

| # | 機能 | 概要 |
|---|------|------|
| 9 | **ブックマーク機能** | よく使うディレクトリのブックマーク登録・ジャンプ |
| 10 | **パンくずリスト** | 現在のパス階層をクリック可能なパンくずリストで表示 |
| 11 | **ファイル操作（基本）** | 右クリックメニューからの削除・名前変更・コピー |
| 12 | **ドラッグ&ドロップ** | 3Dビューからファイルマネージャーへのファイルドロップ |

---

## D. 技術基盤（優先度: 低〜中）

| # | 機能 | 概要 |
|---|------|------|
| 13 | **ModernGLレンダラー完全統合** | Legacy↔ModernGL の切り替えUIと、ModernGL側のフル機能実装 |
| 14 | **プラグインシステム** | カスタムカラースキーム・レイアウト戦略・フィルタのプラグイン化 |
| 15 | **テスト拡充** | Node, LayoutEngine, Scanner, Camera のユニットテスト追加（SPECのテスト拡張表に対応） |
| 16 | **CI/CD & パッケージ公開** | GitHub Actions でテスト・lint自動化、PyPI公開 |

---

## E. 先進的な拡張（優先度: 低）

| # | 機能 | 概要 |
|---|------|------|
| 17 | **リアルタイムファイル監視** | `watchdog` による変更検知・自動更新 |
| 18 | **リモートファイルシステム** | SSH/SFTP経由でリモートサーバーのディレクトリを可視化 |
| 19 | **VR/AR対応** | OpenXR経由でのVRヘッドセット表示 |
| 20 | **マルチルート比較ビュー** | 2つのディレクトリを並べて差分表示（diff的な3D可視化） |

---

## 推奨ロードマップ

```
Phase 1 (UX基盤):     A1 → A2 → A3 → A4
Phase 2 (可視化強化):  B5 → B6 → B7 → B8
Phase 3 (操作性):      C9 → C10 → C11 → C12
Phase 4 (技術基盤):    D13 → D15 → D16 → D14
Phase 5 (先進):        E17 → E18 → E19 → E20
```

既存のコード資産（`performance.py`のユーティリティ、`_calculate_emission()`のgit_statusフック、`ModernGLRenderer`等）を活かしつつ、ユーザー体験を着実に改善する方針を推奨します。

---

*作成日: 2026-02-11*
